<!DOCTYPE HTML>
<html>
  <title>Cross Domain Demo</title>
  <script type="text/javascript" charset="utf-8">
  </script>
  <body>
    <input type='button' value='开始测试' onclick='crossDomainRequest()' />  
      <div id="content"></div>  
      <script type="text/javascript">
        var xhr = new XMLHttpRequest();  
        var url = 'http://crossdomain.cn:3000';  
        function crossDomainRequest() {  
          document.getElementById("content").innerHTML = "开始……";  
          if (xhr) {  
            xhr.open('GET', url, true);  
            xhr.onreadystatechange = handler;  
            xhr.send();  
          } else {  
            document.getElementById("content").innerHTML = "不能创建 XMLHttpRequest";  
          }  
        }  
        function handler(evtXHR) {  
          // alert(xhr.readyState);
          if (xhr.readyState == 4) {  
            if (xhr.status == 200) {  
              var response = xhr.responseText;  
              document.getElementById("content").innerHTML = "结果：" + response;  
            } else {  
              document.getElementById("content").innerHTML = "不允许跨域请求。";  
            }  
          }  
          else {  
            document.getElementById("content").innerHTML += "<br/>执行状态 readyState：" + xhr.readyState;  
          }  
        }  
    </script> 
  </body>
</html>
